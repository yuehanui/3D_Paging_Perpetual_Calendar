
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <style type="text/css">
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                font-family: sans-serif;
            }
            #container {
                perspective: 800px;
                perspective-origin: center 364px;
                overflow: hidden;
            }
            #page-group {
                width: 360px;
                height: 360px;
                margin: 24px auto;
                padding: 20px;
                position: relative;
                transform-style: preserve-3d;       
            }
            .page {
                width: 320px;
                height: 320px;
                color: #fff;
                background-image: linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%);
                text-align: center;
                padding-top: 50px;
                font-size: 80px;
                line-height: 100px; 
                position: absolute;
            }
            #btn-group {
                width: 212px;
                margin: 12px auto;
            }
            .btn {
                width: 96px;
                height: 32px;
                line-height: 32px;
                border: none;
                cursor: pointer;
                color: #fff;
                background-color: #f69;
                border-radius: 4px;
                outline: none;
            }
            .btn:hover {
                background-color: #f39;
            }
            #page3 {
                transform: rotateX(0deg);
                transform-origin: bottom;
                transition: transform 1s linear;
            }
            #page1, #page2 {
                transform: rotateX(-90deg);
                transform-origin: bottom;
                transition: transform 1s linear;
            }
            #page4, #page5 {
                transform: rotateX(90deg); 
                transform-origin: bottom;
                transition: transform 1s linear;
            }
            .forward {
                transform: rotateX(-90deg);
            }
            .back {
                transform: rotateX(90deg);
            }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="page-group">
                <div class="page" id="page1">2018 <br>Jun 14</div>
                <div class="page" id="page2">qqqq</div>
                <div class="page" id="page3">1990 <br>Mar 4</div>
                <div class="page" id="page4">ff</div>
                <div class="page" id="page5">2018 <br>Jun 18</div>
            </div>
        </div>
        <div id="btn-group">
            <button id="pre" class="btn">上一页</button>
            <button id="next" class="btn">下一页</button>
        </div>

        <script>
            var preButton = document.getElementById("pre"),
                nextButton = document.getElementById("next"),
                currentIndex = 3,
                currentYear=1900,
                currentMonth=3,
                currentDay=3,
                month = ["Jan", "Feb", "Mar", "Apr", "May","Jun","Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                M31day =[1,3,5,7,8,10,12],
                M30day =[4,6,9,11]

            function LeapYearOrNot(Year) {
                if(Year%4==0){
                    if(Year % 100 ==0){
                        if (Year % 400 ==0){
                            return true;
                        } else {
                            return false;
                        }
                    } else {
                        return true;
                    }
                } else {
                    return false;
                } 
            }

            preButton.addEventListener("click", function() {
                Year=currentYear;
                Month=currentMonth;
                Day=currentDay-1;
                if (Day == 0) {
                    Month=currentMonth-1;
                    if (Month == 0){
                        Day=31;
                        Month=12;
                        Year= currentYear-1;
                    } else if (M31day.includes(Month)){
                        Day =31;
                    } else if (M30day.includes(Month)){
                        Day = 30;
                    } else {
                        var x = LeapYearOrNot(Year);
                        if (x) {
                            Day= 29;
                        } else {
                            Day=28;
                        }
                    }
                }
                if (currentIndex==1) {
                    preIndex=5;
                    flipIndex=3;
                } else if (currentIndex==4) {
                    preIndex=3;
                    flipIndex=1;
                } else if (currentIndex==5) {
                    preIndex = 4;
                    flipIndex = 2;
                } else {
                    preIndex = currentIndex - 1;
                    flipIndex= currentIndex + 2;
                }
                document.getElementById("page" + preIndex).style.backgroundImage = "linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)";
                document.getElementById("page" + preIndex).style.color = "white";
                document.getElementById("page" + flipIndex).style.backgroundImage = "none";
                document.getElementById("page" + flipIndex).style.color = "rgba(255, 255, 255, 0)";

                document.getElementById("page" + currentIndex).style.transform = "rotateX(90deg)";
                document.getElementById("page" + preIndex).innerHTML = Year+" <br>"+month[Month-1]+" "+ (Day);
                document.getElementById("page" + preIndex).style.transform = "rotateX(0deg)";
                document.getElementById("page" + flipIndex).style.transform = "rotateX(-90deg)";
                if (currentIndex == 1){
                    currentIndex = 5;
                } else {
                    currentIndex -= 1;
                }
                currentYear=Year;
                currentMonth=Month;
                currentDay=Day;
            }, false);


            nextButton.addEventListener("click", function() {
                Year=currentYear;
                Month=currentMonth;
                Day=currentDay+1;
                var x = LeapYearOrNot(Year);
                if (Day==32 && Month ==12) {
                    Year +=1;
                    Month =1 ;
                    Day = 1;
                } else if (Day==29 && Month==2 && x==false) {
                    Month+=1;
                    Day = 1;
                } else if (Day==30 && Month==2 && x ==true) {
                    Month +=1;
                    Day = 1
                } else if (Day == 31 && M30day.includes(Month)) {
                    Month +=1;
                    Day = 1
                } else if (Day == 32 && M31day.includes(Month)) {
                    Month +=1;
                    Day = 1
                }

                if (currentIndex==1) {
                    nextIndex=2;
                    flipIndex=4;
                } else if (currentIndex==2) {
                    nextIndex=3;
                    flipIndex=5;
                } else if (currentIndex==5) {
                    nextIndex = 1;
                    flipIndex = 3;
                } else {
                    nextIndex = currentIndex + 1;
                    flipIndex= currentIndex - 2;
                }
                document.getElementById("page" + nextIndex).style.backgroundImage = "linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)";
                document.getElementById("page" + nextIndex).style.color = "white";
                document.getElementById("page" + flipIndex).style.backgroundImage = "none";
                document.getElementById("page" + flipIndex).style.color = "rgba(255, 255, 255, 0)";
                document.getElementById("page" + currentIndex).style.transform = "rotateX(-90deg)";
                document.getElementById("page" +nextIndex).innerHTML = Year+" <br>"+month[Month-1]+" "+ (Day);
                document.getElementById("page" + nextIndex).style.transform = "rotateX(0deg)";
                document.getElementById("page" + flipIndex).style.transform = "rotateX(90deg)";

                if (currentIndex == 5){
                    currentIndex = 1;
                } else {
                    currentIndex += 1;
                }
                currentYear=Year;
                currentMonth=Month;
                currentDay=Day;

            }, false);
        </script>
    </body>
</html>
